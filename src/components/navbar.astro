---

---

<nav x-data="{ userMenuOpen: false }" id="navbar">
  <div class="relative">
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:bg-blue-600 focus:text-white focus:px-4 focus:py-2 focus:z-50"
    >
      Skip to main content
    </a>

    <div class="flex items-center h-12">
      <!-- Logo -->
      <div class="flex">
        <a href="/" id="nav-home" class="flex items-center">
          <img src="/quackhost.webp" alt="QuackHost Mascot" class="w-10 h-10" />
        </a>
      </div>

      <!-- Desktop navigation -->
      <nav
        class="hidden md:flex items-center ml-3"
        role="navigation"
        aria-label="Main navigation"
      >
        <a
          href="/pricing"
          id="nav-pricing"
          class="text-gray-900 hover:bg-gray-200 px-4 py-3">Pricing</a
        >
        <a
          href="/guides-&-tutorials"
          id="nav-guides"
          class="text-gray-900 hover:bg-gray-200 px-4 py-3"
          >Guides & Tutorials</a
        >
        <a
          href="/games"
          id="nav-games"
          class="text-gray-900 hover:bg-gray-200 px-4 py-3">Games</a
        >
      </nav>

      <!-- User icon -->
      <div class="flex items-center ml-auto">
        <div class="relative">
          <button
            @click="userMenuOpen = !userMenuOpen"
            class="p-2 text-gray-900 hover:bg-gray-200"
            aria-label="User menu"
            :aria-expanded="userMenuOpen"
            aria-haspopup="true"
          >
            <img src="/navbar/user.svg" alt="User" class="w-6 h-6" />
          </button>

          <div
            x-show="userMenuOpen"
            @click.away="userMenuOpen = false"
            id="user-dropdown"
            class="absolute right-0 mt-0 w-48 bg-white shadow-lg z-20"
            role="menu"
            style="display: none;"
          >
            <a
              href="https://client.quack.host"
              role="menuitem"
              class="block px-4 py-3 text-sm text-gray-900 hover:bg-gray-100"
              tabindex="-1">Client Portal</a
            >
            <a
              href="https://plane.quack.host"
              role="menuitem"
              class="block px-4 py-3 text-sm text-gray-900 hover:bg-gray-100 border-t border-gray-200"
              tabindex="-1">QuackPlane</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Dropdown navigation state
    let currentDropdownIndex = 0;

    function updateDropdownFocus() {
      const dropdownItems = document.querySelectorAll(
        '#user-dropdown [role="menuitem"]'
      );
      dropdownItems.forEach((item, index) => {
        const htmlItem = item as HTMLElement;
        htmlItem.tabIndex = index === currentDropdownIndex ? 0 : -1;
        if (index === currentDropdownIndex) {
          htmlItem.focus();
        }
      });
    }

    function navigateDropdown(direction: string) {
      const dropdown = document.getElementById("user-dropdown");
      if (!dropdown || dropdown.style.display === "none") return;

      const dropdownItems = document.querySelectorAll(
        '#user-dropdown [role="menuitem"]'
      );
      if (direction === "down") {
        currentDropdownIndex =
          (currentDropdownIndex + 1) % dropdownItems.length;
      } else if (direction === "up") {
        currentDropdownIndex =
          (currentDropdownIndex - 1 + dropdownItems.length) %
          dropdownItems.length;
      }
      updateDropdownFocus();
    }

    // Global keyboard shortcuts
    document.addEventListener("keydown", (e) => {
      const key = e.key.toLowerCase();

      // 0 = home page
      if (key === "0" && !e.ctrlKey && !e.metaKey && !e.altKey) {
        e.preventDefault();
        document.getElementById("nav-home").click();
        return;
      }

      // L = toggle login dropdown
      if (key === "l" && !e.ctrlKey && !e.metaKey && !e.altKey) {
        e.preventDefault();
        const userMenuBtn = document.querySelector(
          '[aria-label="User menu"]'
        ) as HTMLElement;
        if (userMenuBtn) userMenuBtn.click();
        return;
      }

      // C = client portal
      if (key === "c" && !e.ctrlKey && !e.metaKey && !e.altKey) {
        e.preventDefault();
        window.location.href = "https://client.quack.host";
        return;
      }

      // Q = quackplane
      if (key === "q" && !e.ctrlKey && !e.metaKey && !e.altKey) {
        e.preventDefault();
        window.location.href = "https://plane.quack.host";
        return;
      }

      // 1, 2, 3 = navigate to menu items
      if (
        ["1", "2", "3"].includes(key) &&
        !e.ctrlKey &&
        !e.metaKey &&
        !e.altKey
      ) {
        e.preventDefault();
        const navItems = ["nav-pricing", "nav-guides", "nav-games"];
        const targetNav = document.getElementById(navItems[parseInt(key) - 1]);
        if (targetNav) {
          targetNav.click();
        }
        return;
      }

      // Arrow keys for dropdown navigation
      const dropdown = document.getElementById("user-dropdown");
      if (
        dropdown.style.display !== "none" &&
        ["arrowdown", "arrowup"].includes(key)
      ) {
        e.preventDefault();
        navigateDropdown(key === "arrowdown" ? "down" : "up");
        return;
      }

      // Enter to activate focused dropdown item
      if (dropdown.style.display !== "none" && key === "enter") {
        e.preventDefault();
        const dropdownItems = document.querySelectorAll(
          '#user-dropdown [role="menuitem"]'
        );
        const targetItem = dropdownItems[currentDropdownIndex] as HTMLElement;
        if (targetItem) targetItem.click();
        return;
      }
    });

    // Reset dropdown index when menu opens
    document.addEventListener("click", (e) => {
      const target = e.target as HTMLElement;
      if (target && target.closest('[aria-label="User menu"]')) {
        setTimeout(() => {
          currentDropdownIndex = 0;
          updateDropdownFocus();
        }, 10);
      }
    });
  </script>
</nav>
